---
title:  "[Cμ–Έμ–΄] 14. λ™μ  λ©”λ¨λ¦¬ ν• λ‹Ή"
excerpt: "Dynamic Memory"
categories:
  - C_Programming
toc: true
toc_sticky: true
 
date: 2023-12-30
last_modified_at: 2023-12-30

published: true
---


## λ™μ  λ©”λ¨λ¦¬

> Dynamic Mermory

λ™μ λ©”λ¨λ¦¬λ” ν”„λ΅κ·Έλ¨ μ‹¤ν–‰μ¤‘ ν• λ‹Ήλ°›μ„ μ μλ” λ©”λ¨λ¦¬ κ³µκ°„μ…λ‹λ‹¤.

μΌλ°μ μΈ μ •μ  λ°©μ‹κ³Ό λ‹¤λ¥΄κ², λ°°μ—΄μ κΈΈμ΄λ¥Ό μ½”λ“λ΅ μ μ–΄ν•  μ μμµλ‹λ‹¤.

<br />

### malloc

```c
int *p = (int *)malloc(sizeof(int));
```

λ™μ  λ©”λ¨λ¦¬λ¥Ό μ„ μ–Έν•λ” μ½”λ“μ…λ‹λ‹¤.

ν¬μΈν„° λ³€μλ¥Ό μ„ μ–Έν•κ³ , μ›ν•λ” λ©”λ¨λ¦¬μ ν¬κΈ°λ§νΌ λ©”λ¨λ¦¬λ¥Ό ν• λ‹Ήν•λ” κµ¬μ΅°μ…λ‹λ‹¤.

![malloc](https://github.com/leehan416/Blog_comments/assets/35258105/0c77f4ae-e4ac-4f59-aa37-c1fd096f0255){: width="70%" height="70%"}{: .center}

ν•¨μμ λ§¤κ²λ³€μλ΅ ν• λ‹Ήν•  λ©”λ¨λ¦¬μ ν¬κΈ°λ¥Ό λ„£μµλ‹λ‹¤.

<br />

> ν•λ³€ν™(casting)μ— κ΄€ν•μ—¬

μμ‹ μ½”λ“μ—μ„λ” `ν•λ³€ν™`μ„ μ μ©ν•μ€μ§€λ§, μ‚¬μ‹¤ ν•„μμ μΌλ΅ μ‘μ„±ν•  ν•„μ”λ” μ—†μµλ‹λ‹¤.

μλ„μ— λ§μ¶”μ–΄ μ½”λ“λ¥Ό μ μ‘μ„±ν•μ€λ‹¤λ©΄, μ»΄ν“¨ν„°κ°€ μ•μ•„μ„ ν•λ³€ν™μ„ μ§„ν–‰ν•©λ‹λ‹¤.

<br />

ν•μ§€λ§, μ»΄ν“¨ν„°λ” μ½”λ“ μ‘μ„±μμ μλ„λ¥Ό μ™„μ „ν•κ²λ” νμ•…ν•μ§€ λ»ν•κ³ , μ—λ¬λ¥Ό λ°μƒμ‹ν‚¬ μ μμµλ‹λ‹¤.

λ•λ¬Έμ—, μ•μ •μ μΈ μ½”λ“ μ‘μ„±μ„ μ„ν•μ—¬λ” ν•λ³€ν™μ΄ κ¶μ¥λκ³  μμµλ‹λ‹¤.

<br />

> sizeof() ν•¨μ

```c
int value = 10;

int size = sizeof(value);

```

λ§¤κ°λ³€μλ΅ λ“¤μ–΄μ¤λ” λ°μ΄ν„° νƒ€μ…, λ³€μμ ν¬κΈ°λ¥Ό λ°ν™ν•΄μ£Όλ” ν•¨μμ…λ‹λ‹¤.

byte λ‹¨μ„λ΅ λ°ν™ν•κΈ° λ•λ¬Έμ—, μ„ μ½”λ“μ—μ„ `size`λ³€μμ—λ” `4`κ°€ μ €μ¥λ©λ‹λ‹¤.

<br />

```c
int *p = (int *)malloc(sizeof(int));
```

`sizeof` ν•¨μμ— λ€ν•μ—¬ μ„¤λ…ν•μ€μΌλ‹, μ΄μ λ” μ„ μ½”λ“κ°€ μ΄ν•΄λμ‹¤ κ²λ‹λ‹¤.

`ν¬μΈν„° λ³€μ p`μ— `int`λ°μ΄ν„° νƒ€μ…μ μ‚¬μ΄μ¦λ§νΌ λ©”λ¨λ¦¬λ¥Ό ν• λ‹Ήν•μ—¬ μ£Όλ” κ²ƒμ΄μ£ .

<br />

### free()

```c
int *p = (int *)malloc(sizeof(int) * 10); 

free(p); // λ©”λ¨λ¦¬ ν•΄μ     
```

ν• λ‹Ήλμ—λ λ©”λ¨λ¦¬ κ³µκ°„μ„ ν—¤μ ν•λ” ν•¨μμ…λ‹λ‹¤.

λ©”λ¨λ¦¬λ¥Ό ν—¤μ μ‹ν‚¤μ§€ μ•μΌλ©΄, λ‚­λΉ„λλ” λ°μ΄ν„° κ³µκ°„μ΄ λ§μ•„μ Έμ„ μ»΄ν“¨ν„°κ°€ λλ ¤μ§€κ² λ©λ‹λ‹¤.

μ΄ ν„μƒμ„ `λ©”λ¨λ¦¬ λ„μ`λΌκ³  ν•©λ‹λ‹¤. 

<br />

λ©”λ¨λ¦¬ λ„μλ¥Ό λ°©μ§€ν•κΈ° μ„ν•΄μ„λ” μ‚¬μ©μ΄ λλ‚ λ³€μλ” λ©”λ¨λ¦¬λ¥Ό ν—¤μ ν•μ—¬ λ©”λ¨λ¦¬ λ„μλ¥Ό λ°©μ§€ν•  μ μμµλ‹λ‹¤.

λ§μ•½ ν—¤μ λ λ³€μλ΅ μ ‘κ·Όν•  κ²½μ°μ—” μ—λ¬κ°€ λ°μƒν•  μ μκΈ° λ•λ¬Έμ—, μ£Όμν•΄μ•Ό ν•©λ‹λ‹¤.

<br />

### ν™μ©

```c
int *p = (int *)malloc(sizeof(int) * 10); 
```

ν¬μΈν„° κΈ€μ—μ„ μ„¤λ…ν–λ“―, λ°°μ—΄κ³Ό ν¬μΈν„°λ” κ±°μ λ™μΌν•©λ‹λ‹¤. 

κ·Έλ ‡κΈ° λ•λ¬Έμ—, ν¬μΈν„°λ¥Ό λ°°μ—΄κ³Ό κ°™μ΄ μ‚¬μ©ν•  μ μλ‹¤ μ„¤λ…ν–μ—μ£ .

λ°°μ—΄μ„ ν¬μΈν„°λ΅ ν™μ©ν•λ” λ°©μ‹μ΄ λ™μ  λ©”λ¨λ¦¬λ¥Ό ν• λ‹Ήν•λ” λ°©μ‹μ…λ‹λ‹¤.

<br />

```c
int arr[num] //error

int *arr = (int *)malloc(sizeof(int) * num); 
```

μ „μ— μ„¤λ…ν–λ“―, λ°°μ—΄μ„ μ„ μ–Έν•λ” κ³Όμ •μ—μ„ λ°°μ—΄μ ν¬κΈ°λ” λ™μ μΌλ΅ λ³€κ²½ν•  μ μ—†μµλ‹λ‹¤.

λ°°μ—΄μ„ μ„ μ–Έν•  λ•, κΈΈμ΄λ¥Ό λ³€μλ΅ ν™μ©ν•  μ μ—†λ‹¤λ” λ»μ΄μ£ . 

ν•μ§€λ§, λ™μ  λ©”λ¨λ¦¬ ν• λ‹Ήλ°©μ‹μΌλ΅λ” ν™μ©ν•  μ μμµλ‹λ‹¤.

<br />

```c
int *func(){
    int *p = (int *)malloc(sizeof(int));
    return p;
}
```

ν•¨μλ¥Ό ν™μ©ν• λ°©μ‹μΌλ΅λ„ λ°μ΄ν„°λ¥Ό ν• λ‹Ήν•  μ μμµλ‹λ‹¤.


<br />

<!-- 
## Linked List

λ°°μ—΄μ„ λ‹¤λ£¨λ‹¤ λ³΄λ©΄, λ°μ΄ν„° μ „μ²΄λ¥Ό μ΄λ™ν•λ” κ²½μ°μ™€ κ°™μ΄ μλ¦¬ μ΄λ™μ—μ„ ν° λ¶νΈν•¨μ΄ μλ‹¤. 

Linked Listλ” μ΄λ¬ν• μ μ„ κ°„λ‹¨ν•κ² λ³€κ²½ν•  μ μκ³ , λ™μ μΌλ΅ μƒμ„±ν•  μ μλ‹¤.

```c
struct data{
    int i;
    int value;
    struct data *link; // λ‹¤μ λ…Έλ“ μ£Όμ†
};

// γ…->γ…->γ…->γ…->γ…-> ... ->NULL
```

μ¤νΈλ­μ³μ— λ‹¤μ λ…Έλ“ μ£Όμ†λ¥Ό μ €μ¥ν•κΈ° λ•λ¬Έμ—, λ°°μ—΄μ— λΉ„ν•΄ λ°μ΄ν„°μ μμ λ„κ°€ λ†’λ‹¤. 

```c
for(struct data *p = list; p != NULL; p = p->link)
```

ν•μ§€λ§, μ›ν•λ” λ°μ΄ν„°λ¥Ό μ°ΎκΈ° μ„ν•΄ λ°°μ—΄μ— λΉ„ν•΄ μ‹κ°„μ΄ μ¤λκ±Έλ¦°λ‹¤λ” λ‹¨μ μ΄ μλ‹¤.

 -->

---
```
π’΅ μ§€μ  ν™μν•©λ‹λ‹¤
``` 